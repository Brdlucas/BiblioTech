{% extends 'base.html.twig' %}

{% block body %}
	{% if book is not empty %}

		<div class="h-screen flex items-center justify-center bg-gray-100">
			<div class="max-w-7xl w-full bg-white shadow-lg rounded-lg p-6">
				<div class="flex flex-col lg:flex-row items-start">

					<div class="w-full lg:w-1/3 h-64 mb-6 lg:mb-0">
						{% if book.volumeInfo.imageLinks is defined and book.volumeInfo.imageLinks.extraLarge is defined %}
							<img src="{{ book.volumeInfo.imageLinks.extraLarge }}" alt="{{ book.volumeInfo.title }}" class="w-full h-full object-cover rounded-md">
						{% else %}
							<img src="/img/no-img.png" alt="{{ book.volumeInfo.title }}" class="w-full h-full object-contain rounded-md">
						{% endif %}
					</div>


					<div class="flex-1 pl-0 lg:pl-6">
						<h1 class="text-3xl font-semibold text-gray-900 mb-4">{{ book.volumeInfo.title }}</h1>


						<div class="text-sm text-gray-600 mb-2">
							{% if book.volumeInfo.authors is defined and book.volumeInfo.authors is not empty %}
								<span class="font-medium text-gray-700">Auteur(s):</span>
								{% for author in book.volumeInfo.authors %}
									<span class="text-gray-700">{{ author }}</span>
									{% if not loop.last %},
									{% endif %}
								{% endfor %}
							{% else %}
								<span class="text-gray-500">Aucun auteur disponible</span>
							{% endif %}
						</div>


						<div class="text-sm text-gray-500 mb-2">
							<span class="font-medium">Publié le :</span>
							{{ book.volumeInfo.publishedDate }}
						</div>


						<div class="text-sm text-gray-500 mb-2">
							<span class="font-medium">Editeur :</span>
							{{ book.volumeInfo.publisher }}
						</div>


						<div class="text-sm text-gray-500 mb-2">
							<span class="font-medium">Description :</span>
							<p>{{ book.volumeInfo.description | default('aucune description') }}</p>
						</div>


						<div class="text-sm text-gray-500 mb-2">
							<span class="font-medium">Nombre de pages :</span>
							<strong>{{ book.volumeInfo.pageCount }}</strong>
						</div>

						<div class="text-sm text-gray-500 mb-2">
							<span class="font-medium">Note globale :</span>
							<strong>{{ book.volumeInfo.averageRating | default('aucune') }}</strong>
							sur les
							<strong>{{ book.volumeInfo.ratingsCount | default('0') }}</strong>
							utilisateurs
						</div>

						<div class="text-sm text-gray-500 mb-4">
							{% if book.volumeInfo.categories is defined and book.volumeInfo.categories[0] is not empty %}
								<span class="font-medium">Catégorie :</span>
								{{ book.volumeInfo.categories[0] }}
							{% else %}
								<span class="text-gray-500">Aucune catégorie disponible</span>
							{% endif %}
						</div>

						<div class="mt-4">
							<a href="{{ book.volumeInfo.infoLink }}" target="_blank" class="text-white bg-blue-400 hover:bg-blue-500 p-3 rounded-lg transition duration-200">Voir le résumé</a>
						</div>

						<form action="{{ path('app_borrowing_id', { 'id': book.id }) }}" method="post">
							<button type="submit" class="btn btn-primary">Emprunter</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	{% else %}
		<p class="mt-6 text-gray-500 text-center">Ce livre n'est pas disponible.</p>
	{% endif %}
	{{ dump(book) }}
{% endblock %}